@page "/professor/DashboardProfessor"
@namespace gestaopedagogica.Pages.Professor
@layout MainLayout
@using gestaopedagogica.Components
@using Microsoft.AspNetCore.Components.Authorization

<AuthorizeView Roles="Professor">
    <Authorized>
        <h3>Dashboard do Professor</h3>

        <div>
            <h5>Módulos que leciono</h5>
            @if (Modules?.Any() != true)
            {
                <p>Sem módulos atribuídos.</p>
            }
            else
            {
                <div class="list-group">
                    @foreach (var mod in Modules)
                    {
                        <div class="list-group-item">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <strong>@mod.Name</strong>
                                    <div class="text-muted">Turmas: @string.Join(", ", mod.Classes)</div>
                                </div>
                                <div>
                                    <a class="btn btn-sm btn-primary" href="/professor/AvaliarAlunos?moduleId=@mod.Id">Avaliar Alunos</a>
                                    <a class="btn btn-sm btn-secondary ms-2" href="/professor/RelatoriosProfessor?moduleId=@mod.Id">Relatórios</a>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            }
        </div>
    </Authorized>
    <NotAuthorized>
        <div class="alert alert-danger mt-5">
            <h4>Acesso Negado</h4>
            <p>Você não tem permissão para acessar o dashboard do professor.</p>
            <p>Por favor, <a href="/Identity/Account/Login">faça login novamente</a> com uma conta de professor.</p>
        </div>
    </NotAuthorized>
</AuthorizeView>

@code {
    private List<ModuleModel> Modules = new()
    {
        new ModuleModel{ Id=1, Name="Matemática", Classes=new List<string>{"Turma A","Turma B"} },
        new ModuleModel{ Id=2, Name="Física", Classes=new List<string>{"Turma C"} }
    };

    public class ModuleModel{ public int Id { get; set; } public string Name { get; set; } = ""; public List<string> Classes { get; set; } = new(); }
}
